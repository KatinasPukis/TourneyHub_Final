function deleteTournament(t){confirm("Are you sure you want to delete this tournament?")&&$.ajax({type:"DELETE",url:"/api/sitecore/Tournament/DeleteTournament",data:{tournamentId:t},success:function(t){t.success?window.location.reload():alert("Failed to delete tournament: "+t.message)},error:function(t){alert("An error occurred while communicating with the server")}})}$(document).ready(function(){$("#errorAlert").hide(),$("#loginForm").submit(function(t){t.preventDefault(),console.log("Gathering login data");t={username:$("#username").val(),password:$("#password").val()};$.ajax({type:"POST",url:"/api/sitecore/Login/UserData",data:t,success:function(t){t.success?setTimeout(function(){window.location.href=t.redirectUrl},1e3):(console.error("Login failed:",t.message),$("#errorAlert").text(t.message),$("#errorAlert").show())},error:function(t){console.error("Login request error:",t),$("#errorAlert").text("An error occurred while processing your request."),$("#errorAlert").show()}})})}),$(document).ready(function(){$(".participant-match .edit-button").click(function(){$("#participantModal").modal("show")}),$(".team-match .edit-button").click(function(){$("#teamModal").modal("show")}),$("#participantModal .close-modal-button").click(function(){$("#participantModal").modal("hide")}),$("#teamModal .close-modal-button").click(function(){$("#teamModal").modal("hide")}),$(document).on("click","#teamModal th.add-score-button",function(){var t=$("#teamModal table tbody").find("tr:last"),a=t.find("td:nth-child(2)"),a=(t.append(a.clone()),$('<th class="add-score-button" style="cursor: pointer;">Add Score</th>'));t.append(a)}),$("#teamModal th.add-score-button").click()}),$(document).ready(function(){$("#editButton").click(function(){var t=$(".card").data("participant-id");$("#editModal").data("participant-id",t),$("#editModal").modal("show")}),$("#saveButton").click(function(){var t,a,e=$("#editModal").data("participant-id");$("#editForm")[0].checkValidity()&&(t=new FormData($("#editForm")[0]),a=$("#editimage")[0].files[0],t.append("editimage",a),t.append("Id",e),t.append("name",$("#name").val()),t.append("surname",$("#surname").val()),t.append("age",$("#age").val()),t.append("info",$("#info").val()),$.ajax({type:"POST",url:"/api/sitecore/Tournament/EditTournamentParticipant",data:t,processData:!1,contentType:!1,success:function(t){t.success?window.location.reload():alert(t.message)},error:function(t){alert("An error occurred while communicating with the server")}}),$("#editModal").modal("hide"))})}),$(document).ready(function(){$("#editTeamButton").click(function(){var t=$(".col-md-8").data("team-id");$("#editTeamModal").data("team-id",t),$("#editTeamModal").modal("show")}),$("#saveTeamButton").click(function(){var t,a,e=$("#editTeamModal").data("team-id");$("#editTeamForm")[0].checkValidity()&&(t=new FormData($("#editTeamForm")[0]),a=$("#teamimage")[0].files[0],t.append("teamimage",a),t.append("Id",e),t.append("TeamName",$("#TeamName").val()),t.append("TeamDescription",$("#TeamDescription").val()),$.ajax({type:"POST",url:"/api/sitecore/Tournament/EditTournamentTeam",data:t,processData:!1,contentType:!1,success:function(t){t.success?window.location.reload():alert(t.message)},error:function(t){alert("An error occurred while communicating with the server")}}),$("#editTeamModal").modal("hide"))})}),$(document).ready(function(){function e(t,a){$(".modal.fade").attr("data-match-id",a),$("#participant1Name").text(t.firstParticipantName),$("#participant1Name").attr("data-participant-id",t.firstParticipantId),$("#participant2Name").text(t.secondParticipantName),$("#participant2Name").attr("data-participant-id",t.secondParticipantId),$("#participant1Selection").attr("data-participant-id",t.firstParticipantId),$("#participant2Selection").attr("data-participant-id",t.secondParticipantId),$("#winnerSelect").empty(),$("#winnerSelect").append(`<option data-participant-id="${t.firstParticipantId}"  value="${t.firstParticipantName}">${t.firstParticipantName}</option>`),$("#winnerSelect").append(`<option data-participant-id="${t.secondParticipantId}" value="${t.secondParticipantName}">${t.secondParticipantName}</option>`)}$(".participant-match .edit-button").click(function(){$("#participantModal").modal("show")}),$(".team-match .edit-button").click(function(){$("#teamModal").modal("show")}),$("#participantModal .close-modal-button").click(function(){$("#participantModal").modal("hide")}),$("#teamModal .close-modal-button").click(function(){$("#teamModal").modal("hide")}),$("#teamModal th#addTeamScoreButton").click(function(){$("#teamModal table tbody").find("tr").each(function(){var t=$('<td><input type="number" class="form-control score-input" placeholder="Score"></td>');$(this).append(t)});var t=$("#teamModal table thead tr"),a=t.find('th:contains("Score")').length;t.find("th#addTeamScoreButton").before("<th>Score</th>"),5<=a&&$("#teamModal th#addTeamScoreButton").prop("disabled",!0)}),$("#participantModal th#addParticipantScoreButton").click(function(){$("#participantModal table tbody").find("tr").each(function(){var t=$('<td><input type="number" class="form-control score-input" placeholder="Score"></td>');$(this).append(t)});var t=$("#participantModal table thead tr"),a=t.find('th:contains("Score")').length;t.find("th#addParticipantScoreButton").before("<th>Score</th>"),5<=a&&$("#participantModal th#addParticipantScoreButton").prop("disabled",!0)}),$(document).ready(function(){$("#participantModal .btn-primary").click(function(){var t=$("#participantModal").attr("data-match-id"),i=[],a=($("#participantModal table tbody tr").each(function(){var t=[],a=$(this).find("td[data-participant-id]").data("participant-id"),e=$("#winnerSelect").val()===a;$(this).find(".score-input").each(function(){t.push($(this).val())}),i.push({participantId:a,scores:t,isWinner:e})}),$("#winnerSelect").find("option:selected").data("participant-id"));$.ajax({type:"POST",url:"/api/sitecore/Tournament/ParticipantMatch",data:JSON.stringify({matchId:t,scores:i,winnerId:a}),contentType:"application/json",success:function(t){console.log(t),setTimeout(function(){location.reload()},1e3)},error:function(t){console.error(t)}})})}),$("#teamModal .btn-primary").click(function(){var t=$("#teamModal").attr("data-match-id"),i=[],a=($("#teamModal table tbody tr").each(function(){var t=[],a=$(this).find("td[data-participant-id]").data("participant-id"),e=$("#winnerSelect").val()===a;$(this).find(".score-input").each(function(){t.push($(this).val())}),i.push({participantId:a,scores:t,isWinner:e})}),$("#winnerSelect").find("option:selected").data("participant-id"));$.ajax({type:"POST",url:"/api/sitecore/Tournament/TeamMatch",data:JSON.stringify({matchId:t,scores:i,winnerId:a}),contentType:"application/json",success:function(t){console.log(t),setTimeout(function(){location.reload()},1e3)},error:function(t){console.error(t)}})}),$(".participant-match .edit-button").click(function(){var a,t=$(this).closest(".participant-match").data("participant-match-id");a=t,$.ajax({type:"GET",url:"/api/sitecore/Tournament/GetParticipantMatchData?matchId="+a,success:function(t){e(t,a)},error:function(t){console.error(t)}})}),$(".team-match .edit-button").click(function(){var a,t=$(this).closest(".team-match").data("team-match-id");a=t,$.ajax({type:"GET",url:"/api/sitecore/Tournament/GetTeamMatchData?matchId="+a,success:function(t){e(t,a)},error:function(t){console.error(t)}})}),$(".participant-match .delete-result").click(function(){var t=$(this).closest(".participant-match").data("participant-match-id"),a=$(this).closest(".participant-match").find('.participant[data-participant-type="first"]').attr("data-participant-id"),e=(console.log("First Participant id: ",a),$(this).closest(".participant-match").find('.participant[data-participant-type="second"]').attr("data-participant-id"));console.log("Second Participant id: ",e),$.ajax({type:"POST",url:"/api/sitecore/Tournament/DeleteResult",data:JSON.stringify({matchId:t,firstParticipantId:a,secondParticipantId:e}),contentType:"application/json",success:function(t){console.log(t),setTimeout(function(){location.reload()},1e3)},error:function(t){console.error(t)}})}),$(".team-match .delete-result").click(function(){var t=$(this).closest(".team-match").data("team-match-id"),a=$(this).closest(".team-match").find('.participant[data-participant-type="first"]').data("participant-id"),e=(console.log("First Participant id: ",a),$(this).closest(".team-match").find('.participant[data-participant-type="second"]').data("participant-id"));console.log("second Participant id: ",e),$.ajax({type:"POST",url:"/api/sitecore/Tournament/DeleteResult",data:JSON.stringify({matchId:t,firstParticipantId:a,secondParticipantId:e}),contentType:"application/json",success:function(t){console.log(t),setTimeout(function(){location.reload()},1e3)},error:function(t){console.error(t)}})})}),$(document).ready(function(){$("#editUserButton").click(function(){var t=$("#user-card").data("user-id");console.log(t),$("#editUserModal").data("user-id",t),$("#editUserModal").modal("show")}),$("#saveUserButton").click(function(){var t,a=$("#editUserForm").data("user-id");console.log(a),$("#editUserForm")[0].checkValidity()&&((t=new FormData($("#editUserForm")[0])).append("Id",a),t.append("name",$("#name").val()),t.append("surname",$("#surname").val()),t.append("email",$("#email").val()),t.append("password",$("#password").val()),t.append("repeatpassword",$("#repeatpassword").val()),$.ajax({type:"POST",url:"/api/sitecore/Tournament/EditUserProfile",data:t,processData:!1,contentType:!1,success:function(t){t.success?window.location.reload():alert(t.message)},error:function(t){alert("An error occurred while communicating with the server")}}),$("#editUserModal").modal("hide"))})}),$(document).ready(function(){$("#registerForm").submit(function(t){t.preventDefault();let a="";var t=$("#email").val(),e=$("#password").val(),i=$("#repeatpassword").val(),n=$("#username").val(),r=$("#surname").val();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?$("#email").removeClass("is-invalid"):(a+="Invalid email address.<br>",$("#email").addClass("is-invalid")),e.length<6?(a+="Password must be at least 6 characters long.<br>",$("#password").addClass("is-invalid")):$("#password").removeClass("is-invalid"),e!==i?(a+="Passwords do not match.<br>",$("#repeatpassword").addClass("is-invalid")):$("#repeatpassword").removeClass("is-invalid"),n.trim()?$("#username").removeClass("is-invalid"):(a+="Username is required.<br>",$("#username").addClass("is-invalid")),r.trim()?$("#surname").removeClass("is-invalid"):(a+="Surname is required.<br>",$("#surname").addClass("is-invalid"));const o=$("#errorAlert");o.html(a),a?o.show():o.hide(),a||(t=$(this).serialize(),$.ajax({type:"POST",url:"/api/sitecore/Registration/UserData",data:t,success:function(t){t.success&&(console.log("Form submitted successfully"),window.location.href="https://tourneyhub.sc/Login",console.error("Form submission failed"),o.html(t.message),o.show())},error:function(t){console.error("Error:",t)}}))})}),$(document).ready(function(){$("input[name='tournamentType']").change(function(){"Individual"===$("input[name='tournamentType']:checked").val()?($("#individualParticipants").show(),$("#teamSelection").hide()):($("#individualParticipants").hide(),$("#teamSelection").show())}),$(document).ready(function(){$("#submitForm").click(function(t){t.preventDefault(),$.ajax({type:"POST",url:"/api/sitecore/Tournament/GetTournamentFormData",data:{TournamentType:$("input[name='tournamentType']:checked").val(),NumberOfParticipants:$("#numOfParticipants").val(),NumberOfTeams:$("#numOfTeams").val(),NumberOfMembersPerTeam:$("#numOfMembersPerTeam").val(),TournamentFormat:$("#tournamentFormat").val(),SportName:$("#sportName").val(),TournamentName:$("#tournamentName").val()},success:function(t){t.success?window.location.href=t.redirectUrl:$("#errorAlert").text(t.message).show()},error:function(){$("#errorAlert").text("An error occurred while processing your request.").show()}})})});document.cookie.replace(/(?:(?:^|.*;\s*)tempTournamentIdentifier\s*=\s*([^;]*).*$)|^.*$/,"$1");var t=function(){var t=(new Date).getTime().toString();t=t.replace(/[^a-zA-Z0-9_]/g,"_").substring(0,50);return t}();document.cookie="tempTournamentIdentifier="+t});